# React 기초

## React란?

**React**는 **사용자 인터페이스를 만들기 위한** JavaScript **라이브러리**이다.

리액트는 인터렉션이 많은 웹 앱을 개발하기 위해 주로 사용되는데, 이러한 웹 앱을 만드는 다른 Tool인 Vue나 Angualar와 많이 비교를 하게 된다.

여기서 먼저 프레임워크와 라이브러리의 차이를 알아보자.

간단하게 보면, **프레임워크**는 어떠한 앱을 만들기 위해 필요한 대부분의 것을 가지고 있는 것이다.

**라이브러리**는 어떠한 특정 기능을 모듈화 해놓은 것이다.

즉, **프레임워크**는 **라이브러리를 포함**하고 또한 개발자가 작성한 소스 코드를 호출한다. 그리고 **소스 코드는 어떠한 기능을 구현하기 위해서 라이브러리를 호출**하게 된다.

위에서 **React**는 프레임워크가 아닌 라이브러리라 했는데, 그 이유는 React는 전적으로 **UI를 렌더링**하는 데 관여하기 때문이다.

그리고 **화면을 바꾸는 라우팅**은 **react-router-dom** 모듈을 사용하며, **상태 관리**를 위해서는 **redux, mobx** 등 여러 모듈을 사용하며, **빌드**를 위해서는 **webpack, npm** 등, **테스팅**을 위해서도 **Eslint, Mocha** 등을 이용하기 때문에 React는 프레임워크가 아닌 라이브러리이다.

## React를 사용하는 이유

- 상대적으로 배우기 쉬운 라이브러리
- 여러 기능들을 위해 이미 만들어져 있는 라이브러리 환경
- 많은 기업들의 사용으로 검증이 된 라이브러리(페이스북)

## React 컴포넌트란?

React는 여러 컴포넌트를 이용해서 웹 앱을 개발하게 된다.

그러면 컴포넌트는 무엇일까?

**컴포넌트**는 리액트로 만들어진 **앱을 이루는 최소한의 단위**이다.

**리액트**는 **여러 컴포넌트 조각**으로 되어있다.

컴포넌트가 여러 개로 나누어져 있기 때문에 하나의 컴포넌트를 여러 곳에서 사용할 수 있고, 여러 명이 각자 맡은 컴포넌트를 동시에 수정할 수도 있다.

### React 컴포넌트 종류

만약 안녕하세요라는 UI를 만들고자 하면 아래와 같이 코드를 작성해야 한다.

- **클래스형 컴포넌트**
    
    ```jsx
    class App extends Component {
      render() {
        return <h>안녕하세요.</h>
      }
    }
    ```
    
- **함수형 컴포넌트**
    
    ```jsx
    function App() {
      return <h1>안녕하세요.</h1>
    }
    ```
    

원래 React로 개발할 때는 클래스 컴포넌트를 이용해서 많이 개발을 했지만, React에서 Hooks라는 것을 발표한 이후부터는 함수형 컴포넌트를 이용해서 개발을 많이 한다.

### Node.js란?

React 프로젝트를 만들기 위해서는 Node.js와 npm을 먼저 설치해야하는데 Node.js를 받을 때 npm도 같이 설치 된다.

Node.js란 크롬 V8 자바스크립트 엔진으로 빌드한 자바스크립트 런터임으로서, **웹 브라우저 환경이 아닌 곳**에서도 자바스크립트를 사용하여 연산할 수 있다.

### React 설치 시 Node.js가 필요한 이유

React 앱은 웹 브라우저에서 실행되는 코드여서 Node.js와 직접적인 연관은 없지만, 프로젝트를 개발하는 데 주요 도구들이 Node.js를 사용하기 때문에 필요하다.

이 때 사용하는 개발 도구는 바벨, 모듈화된 코드를 한 파일로 합치고 코드를 수정할 때 마다 웹 브라우저를 리로딩하는 등 여러 기능을 지닌 웹팩 등이 있다.

## 브라우저가 그려지는 원리 및 가상돔

React의 주요 특징 중 하나는 가상돔을 사용한다는 것이다.

가상돔을 왜 사용하는지 알기 위해 브라우저가 렌더링하는 과정을 알아보자.

### 웹 페이지 빌드 과정(Critical Rendering Path CRP)

브라우저가 서버에서 페이지에 대한 HTML 응답을 받고 화면에 표시하기 전에 여러 단계가 있다.

웹 브라우저가 HTML 문서를 읽고, 스타일을 입히고, 뷰포트에 표시한다.

![Untitled1](https://github.com/Heo-y-y/development-blog/assets/112863029/0cdad51a-5fd4-4dd1-aae0-b217b53b7b59)

**DOM tree**를 생성하는 부분을 보면, 렌더 엔진이 문서를 읽어들여서 그것들을 파싱하고 어떤 내용을 페이지에 렌더링할지 결정한다.

**Render tree**를 생성하는 단계는 브라우저가 DOM과 CSSOM을 결합하는 곳이며, 이 프로세스는 화면에 보이는 모든 콘텐츠와 스타일 정보를 모두 포함하는 최종 렌더링 트리를 출력한다. 즉, 화면에 표시되는 모든 노드의 콘텐츠 및 스타일 정보를 포함한다.

**Layout**(**reflow**) 단계는 브라우저가 페이지에 표시되는 각 요소의 크기와 위치를 계산하는 단계이다.

마지막으로 **Paint**는 실제 화면에 그려지는 단계이다.

여기서 문제점은 어떤 인터렉션에 의해 DOM에 변화가 발생하면, 그 때 마다 Render Tree가 재생성 된다. 즉, 모든 요소들의 스타일을 다시 계산하고, Layout, Repain 과정까지 다시 거치게 되는 것이다.

인터렉션이 작은 웹이면 괜찮지만 만약 인터렉션이 엄청나게 많다면, 작은 변화로 인해 위 그림처럼 필요한 과정을 계속 거치게 되니 불필요하게 DOM을 조작하는 비용이 너무 크게 된다.

이러한 문제로 인해서 나오게 된 것이 가상 돔 **Virtual Dom**이다. 가상 돔이란 **실제 DOM을 메모리에 복사**해준 것으로 생각하면 된다.

![Untitled2](https://github.com/Heo-y-y/development-blog/assets/112863029/d6022dbb-8669-48cb-8457-aa7e21759adf)

데이터가 바뀌면 가상돔에 렌더링 되고, 이전에 생긴 가상돔과 비교해서 **바뀐 부분만 실제 돔에 적용**을 시켜준다. 바뀐 부분을 찾는 과정을 **Diffing**이라고 부르며, 바뀐 부분만 실제 돔에 적용시켜주는 것을 **재조정**(**reconciliation**)이라고 부른다.

![Untitled3](https://github.com/Heo-y-y/development-blog/assets/112863029/082f937c-1bd1-4656-8d80-04acc5c7dfcd)

이러한 가상돔 덕분에 만약 요소가 30개가 변하였다고 하더라도 한 번에 묶어서 한 번의 실제 돔 수정으로 처리하게 돼서 돔을 조작하는 비용을 줄이게 된다.

## 웹팩이란?

**웹팩**은 오픈 소스 자바스크립트 **모듈 번들러**로써 여러개로 나누어져 있는 파일들을 하나의 자바스크립트 코드로 압축하고 최적화하는 라이브러리이다.

### 웹팩의 장점

1. 여러 파일의 자바스크립트 코드를 압축하여 최적화 할 수 있기 때문에 로딩에 대한 네트워크 비용을 줄일 수 있다.
2. 모듈 단위로 개발이 가능하며, 가독성과 유지보수가 용이하다.

![Untitled4](https://github.com/Heo-y-y/development-blog/assets/112863029/8c1256f2-f971-403e-8ecc-4d766ff249c0)

## 바벨이란?

최신 자바스크립트 문법을 지원하지 않는 브라우저들을 위해서 최신 자바스크립트 문법을 **구형 브라우저에서도 돌수 있게 변환** 시켜주는 라이브러리이다.

## **Create-React-APP**

**Create-React-APP**을 사용해서 리액트를 설치하면 Babel이나 Webpack 설정이 이미 다 되어있기 때문에 많은 시간이 걸리지 않고, React 앱을 시작할 수 있다.

### **Create-React-APP 설치**

```jsx
npx create-react-app ./
```

여기서 `./` 사용하면 현재 경로에 설치하겠다는 뜻이다.

### NPX 란?

**npx**는 **노드 패키지 실행을 도와주는 도구**이다. 그래서 Create-React-app 이란 npm 레지스트리에 있는 패키지를 해당 폴더에서 실행해서 React를 설치 해준다.

---

**참고 자료**

- <https://fastcampus.co.kr/dev_online_frontend>
- <https://www.dbswebsite.com/blog/understanding-the-critical-rendering-path/>
- <https://dev.to/ridhamz/the-reconciliation-algorithm-5bab>
- <https://webpack.kr/>
